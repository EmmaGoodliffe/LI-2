var app=function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function o(t){t.forEach(n)}function i(t){return"function"==typeof t}function r(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function c(t,n){t.appendChild(n)}function s(t,n,e){t.insertBefore(n,e||null)}function a(t){t.parentNode.removeChild(t)}function l(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function d(){return u(" ")}function f(t,n,e,o){return t.addEventListener(n,e,o),()=>t.removeEventListener(n,e,o)}function h(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function p(t,n){t.value=null==n?"":n}let m;function $(t){m=t}function y(t){(function(){if(!m)throw new Error("Function called outside component initialization");return m})().$$.on_mount.push(t)}const g=[],w=[],v=[],b=[],x=Promise.resolve();let _=!1;function k(t){v.push(t)}let A=!1;const E=new Set;function j(){if(!A){A=!0;do{for(let t=0;t<g.length;t+=1){const n=g[t];$(n),C(n.$$)}for($(null),g.length=0;w.length;)w.pop()();for(let t=0;t<v.length;t+=1){const n=v[t];E.has(n)||(E.add(n),n())}v.length=0}while(g.length);for(;b.length;)b.pop()();_=!1,A=!1,E.clear()}}function C(t){if(null!==t.fragment){t.update(),o(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(k)}}const P=new Set;function T(t,n){t&&t.i&&(P.delete(t),t.i(n))}function S(t,n,e,o){if(t&&t.o){if(P.has(t))return;P.add(t),undefined.c.push((()=>{P.delete(t),o&&(e&&t.d(1),o())})),t.o(n)}}function I(t){t&&t.c()}function N(t,e,r,c){const{fragment:s,on_mount:a,on_destroy:l,after_update:u}=t.$$;s&&s.m(e,r),c||k((()=>{const e=a.map(n).filter(i);l?l.push(...e):o(e),t.$$.on_mount=[]})),u.forEach(k)}function O(t,n){const e=t.$$;null!==e.fragment&&(o(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function R(t,n){-1===t.$$.dirty[0]&&(g.push(t),_||(_=!0,x.then(j)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function U(n,i,r,c,s,l,u,d=[-1]){const f=m;$(n);const h=n.$$={fragment:null,ctx:null,props:l,update:t,not_equal:s,bound:e(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:i.context||[]),callbacks:e(),dirty:d,skip_bound:!1,root:i.target||f.$$.root};u&&u(h.root);let p=!1;if(h.ctx=r?r(n,i.props||{},((t,e,...o)=>{const i=o.length?o[0]:e;return h.ctx&&s(h.ctx[t],h.ctx[t]=i)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](i),p&&R(n,t)),e})):[],h.update(),p=!0,o(h.before_update),h.fragment=!!c&&c(h.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);h.fragment&&h.fragment.l(t),t.forEach(a)}else h.fragment&&h.fragment.c();i.intro&&T(n.$$.fragment),N(n,i.target,i.anchor,i.customElement),j()}$(f)}class z{$destroy(){O(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function L(n){let e,o,i,r;return{c(){e=l("div"),o=l("div"),h(o,"class",i=(1===n[0]?"bg-good":"bg-s")+" w-0 h-full rounded-sm transition-all duration-700"),h(o,"style",r=`width: ${100*n[0]}%`),h(e,"class","bg-w w-11/12 sm:w-5/6 md:w-1/2 h-4 mx-auto mt-6 rounded-sm")},m(t,n){s(t,e,n),c(e,o)},p(t,[n]){1&n&&i!==(i=(1===t[0]?"bg-good":"bg-s")+" w-0 h-full rounded-sm transition-all duration-700")&&h(o,"class",i),1&n&&r!==(r=`width: ${100*t[0]}%`)&&h(o,"style",r)},i:t,o:t,d(t){t&&a(e)}}}function B(t,n,e){let{width:o=0}=n;return t.$$set=t=>{"width"in t&&e(0,o=t.width)},[o]}class q extends z{constructor(t){super(),U(this,t,B,L,r,{width:0})}}function G(t){let n,e,i,r,m,$,y,g,w,v,b,x,_,k,A,E,j,C,P,R,U,z,L,B,G,D,F,J,M,Y,H,K,Q,V,W,X,Z,tt,nt,et,ot,it,rt,ct,st,at;return g=new q({props:{width:t[1]?1:0}}),P=new q({props:{width:t[4]}}),W=new q({props:{width:t[6]}}),{c(){n=l("main"),e=l("h1"),e.textContent="Playlist generator",i=d(),r=l("ul"),m=l("li"),$=l("h2"),$.textContent="Authentication",y=d(),I(g.$$.fragment),w=d(),v=l("input"),b=d(),x=l("br"),_=d(),k=l("button"),k.textContent="Auth",A=d(),E=l("li"),j=l("h2"),j.textContent="Tracks",C=d(),I(P.$$.fragment),R=d(),U=l("div"),z=l("div"),L=l("textarea"),B=d(),G=l("div"),D=l("textarea"),F=d(),J=l("button"),M=u("Tracks"),H=d(),K=l("li"),Q=l("h2"),Q.textContent="Add",V=d(),I(W.$$.fragment),X=d(),Z=l("input"),tt=d(),nt=l("br"),et=d(),ot=l("button"),it=u("Add"),h(v,"type","text"),h(v,"placeholder","Client ID"),h(k,"class","btn"),h(L,"rows","10"),h(z,"class","flex-1"),h(D,"rows","10"),h(G,"class","flex-1"),h(U,"class","flex justify-evenly"),h(J,"class","btn"),J.disabled=Y=!t[1]||0<t[4]&&t[4]<1,h(Z,"type","text"),h(Z,"placeholder","Playlist name"),h(ot,"class","btn"),ot.disabled=rt=!t[1]||0<t[6]&&t[6]<1,h(n,"class","text-center w-full")},m(o,a){s(o,n,a),c(n,e),c(n,i),c(n,r),c(r,m),c(m,$),c(m,y),N(g,m,null),c(m,w),c(m,v),p(v,t[0]),c(m,b),c(m,x),c(m,_),c(m,k),c(r,A),c(r,E),c(E,j),c(E,C),N(P,E,null),c(E,R),c(E,U),c(U,z),c(z,L),p(L,t[2]),c(U,B),c(U,G),c(G,D),p(D,t[3]),c(E,F),c(E,J),c(J,M),c(r,H),c(r,K),c(K,Q),c(K,V),N(W,K,null),c(K,X),c(K,Z),p(Z,t[5]),c(K,tt),c(K,nt),c(K,et),c(K,ot),c(ot,it),ct=!0,st||(at=[f(v,"input",t[10]),f(k,"click",t[7]),f(L,"input",t[11]),f(D,"input",t[12]),f(J,"click",t[8]),f(Z,"input",t[13]),f(ot,"click",t[9])],st=!0)},p(t,[n]){const e={};2&n&&(e.width=t[1]?1:0),g.$set(e),1&n&&v.value!==t[0]&&p(v,t[0]);const o={};16&n&&(o.width=t[4]),P.$set(o),4&n&&p(L,t[2]),8&n&&p(D,t[3]),(!ct||18&n&&Y!==(Y=!t[1]||0<t[4]&&t[4]<1))&&(J.disabled=Y);const i={};64&n&&(i.width=t[6]),W.$set(i),32&n&&Z.value!==t[5]&&p(Z,t[5]),(!ct||66&n&&rt!==(rt=!t[1]||0<t[6]&&t[6]<1))&&(ot.disabled=rt)},i(t){ct||(T(g.$$.fragment,t),T(P.$$.fragment,t),T(W.$$.fragment,t),ct=!0)},o(t){S(g.$$.fragment,t),S(P.$$.fragment,t),S(W.$$.fragment,t),ct=!1},d(t){t&&a(n),O(g),O(P),O(W),st=!1,o(at)}}}function D(t,n){const e=[];for(let o=0;o<t.length;o+=n)e.push(t.slice(o,o+n));return e}function F(t,n,e){var o=this&&this.__awaiter||function(t,n,e,o){return new(e||(e=Promise))((function(i,r){function c(t){try{a(o.next(t))}catch(t){r(t)}}function s(t){try{a(o.throw(t))}catch(t){r(t)}}function a(t){var n;t.done?i(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(c,s)}a((o=o.apply(t,n||[])).next())}))};let i="5dfa309106f847819f19d5af2dd774cb",r=!1,c=["Rick Astley Never Gonna Give You Up","..."].join("\n"),s="",a=0,l="Test",u=0;const d=t=>{const n={};return t.forEach(((t,e)=>{n[e]=t})),n},f=(t,n)=>o(void 0,void 0,void 0,(function*(){const e=`https://api.spotify.com/v1/${t}`,o=yield fetch(e,{headers:{Authorization:"Bearer "+n}});return yield o.json()})),h=(t,n,e,i)=>o(void 0,void 0,void 0,(function*(){const o=`https://api.spotify.com/v1/${t}`,r=yield fetch(o,{method:null!=i?i:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n},body:JSON.stringify(e)});return yield r.json()}));return y((()=>o(void 0,void 0,void 0,(function*(){var t;window.location.href.includes("#")&&(yield(t=1,new Promise((n=>setTimeout((()=>n()),t)))),e(1,r=!0))})))),[i,r,c,s,a,l,u,()=>{const t="https://accounts.spotify.com/authorize?"+[`client_id=${i}`,"response_type=token",`redirect_uri=${encodeURI("http://localhost:5500/public/index.html")}`,"scope=playlist-read-private playlist-modify-public playlist-modify-private"].join("&");window.location.href=t},()=>{o(void 0,void 0,void 0,(function*(){const t=window.location.href.replace(/.*#/,""),n=d(new URLSearchParams(t)).access_token,o=D(c.split("\n").map((t=>encodeURI(`search?q=${t}&type=track`))),100);e(3,s=""),e(4,a=.01);for(const t in o){const i=o[t],r=(yield Promise.all(i.map((t=>f(t,n))))).map(((t,n)=>{const{items:e}=t.tracks;if(e.length)return e[0].id;throw new Error(`Couldn't find ${i[n]}`)}));e(3,s+=r.join("\n")+"\n"),e(4,a=(parseInt(t)+1)/o.length)}})).catch((t=>{console.error(t)}))},()=>{o(void 0,void 0,void 0,(function*(){const t=window.location.href.replace(/.*#/,""),n=d(new URLSearchParams(t)).access_token,o=(yield f("me/playlists",n)).items.filter((t=>t.name===l))[0].id,i=D(s.split("\n"),100);e(6,u=.01);for(const t in i){const r=i[t].filter((t=>t.trim().length));yield h(`playlists/${o}/tracks`,n,{uris:r.map((t=>`spotify:track:${t.trim()}`))}),e(6,u=(parseInt(t)+1)/i.length)}})).catch((t=>{console.error(t)}))},function(){i=this.value,e(0,i)},function(){c=this.value,e(2,c)},function(){s=this.value,e(3,s)},function(){l=this.value,e(5,l)}]}return new class extends z{constructor(t){super(),U(this,t,F,G,r,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
